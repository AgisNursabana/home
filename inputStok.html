<!DOCTYPE html>
<html>
<head>
  <title>📦 Input Stok Dimsum</title>
</head>
<body style="font-family: sans-serif;">
  <h2>📦 Input dan Cek Stok Dimsum</h2>

  <label>Tanggal:</label><br>
  <input type="date" id="tanggal"><br><br>

  <label>Stok Dimsum Mentai:</label><br>
  <input type="number" id="stokMentai" placeholder="contoh: 50"><br><br>

  <label>Stok Dimsum Goreng:</label><br>
  <input type="number" id="stokGoreng" placeholder="contoh: 60"><br><br>

  <button onclick="simpanStok()">💾 Simpan Stok</button>
  <button onclick="cekStok()">🔍 Cek Stok</button>

  <div id="hasil" style="margin-top:20px;"></div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbz9mzl-AcHTAfZK4Ol49JKAz5nRXzRR1eeEaj2fPt8F7rTrl9TtshnmsMSD3lV7j2AYhg/exec";

function simpanStok() {
  const tanggal = document.getElementById("tanggal").value;
  const stokMentai = document.getElementById("stokMentai").value;
  const stokGoreng = document.getElementById("stokGoreng").value;

  if (!tanggal || !stokMentai || !stokGoreng) {
    alert("⚠️ Semua kolom wajib diisi!");
    return;
  }

  const url = `${WEB_APP_URL}?action=simpan&tanggal=${encodeURIComponent(tanggal)}&stokMentai=${stokMentai}&stokGoreng=${stokGoreng}`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      document.getElementById("hasil").innerHTML = data.message;
    })
    .catch(err => {
      document.getElementById("hasil").innerHTML = "❌ Gagal: " + err;
    });
}

function cekStok() {
  const url = `${WEB_APP_URL}?action=getStock`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      document.getElementById("hasil").innerHTML =
        `📊 Stok terakhir:<br>
         Mentai: <b>${data.Mentai}</b><br>
         Goreng: <b>${data.Goreng}</b>`;
    })
    .catch(err => {
      document.getElementById("hasil").innerHTML = "❌ Gagal cek stok: " + err;
    });
}
</script>
</body>
</html>